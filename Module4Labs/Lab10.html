<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fake E Commerce Website</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    .card-img-top {
      height: 150px;
      object-fit: contain;
    }
  </style>
</head>
<body>
  <div class="container my-4">
    <h1>Fake E Commerce Website</h1>

    <div class="mb-3 d-flex gap-2">
      <select id="categorySelect" class="form-select w-25">
        <option value="all">All Categories</option>
      </select>

      <!-- Optional extra 1: Search for items feature -->
      <input type="text" id="searchInput" class="form-control w-50" placeholder="Search products...">

      <!-- Optional extra 3: Sorting feature -->
      <select id="sortSelect" class="form-select w-25">
        <option value="default">Sort by</option>
        <option value="price-asc">Price: Low â†’ High</option>
        <option value="price-desc">Price: High â†’ Low</option>
        <option value="title-asc">Title: A â†’ Z</option>
        <option value="title-desc">Title: Z â†’ A</option>
      </select>
    </div>

    <div id="productsContainer" class="row g-3"></div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    const productsContainer = document.getElementById('productsContainer');
    const categorySelect = document.getElementById('categorySelect');
    const searchInput = document.getElementById('searchInput'); // Optional extra 1
    const sortSelect = document.getElementById('sortSelect');   // Optional extra 3

    let products = [];

    // Optional extra 2: Add custom icons to each card (To show item category)
    const categoryIcons = {
      "electronics": "ðŸ’»",
      "jewelery": "ðŸ’",
      "men's clothing": "ðŸ‘”",
      "women's clothing": "ðŸ‘—"
    };

    async function fetchProducts() {
      const response = await fetch('https://fakestoreapi.com/products');
      products = await response.json();
      populateCategories();
      displayProducts(products);
    }

    function populateCategories() {
      const categories = [...new Set(products.map(p => p.category))];
      categories.forEach(cat => {
        const option = document.createElement('option');
        option.value = cat;
        option.textContent = cat;
        categorySelect.appendChild(option);
      });
    }

    function displayProducts(items) {
      productsContainer.innerHTML = '';
      items.forEach(item => {
        const col = document.createElement('div');
        col.className = 'col-md-3';
        col.innerHTML = `
          <div class="card h-100">
            <img src="${item.image}" class="card-img-top" alt="${item.title}">
            <div class="card-body">
              <h5 class="card-title">
                <!-- Optional extra 2: show category icon -->
                ${categoryIcons[item.category] || ''} ${item.title}
              </h5>
              <p class="card-text text-truncate">${item.description}</p>
              <p class="fw-bold">$${item.price}</p>
            </div>
          </div>
        `;
        productsContainer.appendChild(col);
      });
    }

    function filterAndSortProducts() {
      const category = categorySelect.value;
      const searchTerm = searchInput.value.toLowerCase(); // Optional extra 1
      let filtered = products;

      if (category !== 'all') {
        filtered = filtered.filter(p => p.category === category);
      }

      // Optional extra 1: Filter by search term
      if (searchTerm) {
        filtered = filtered.filter(p => p.title.toLowerCase().includes(searchTerm));
      }

      // Optional extra 3: Sort products
      const sortValue = sortSelect.value;
      if (sortValue === 'price-asc') filtered.sort((a, b) => a.price - b.price);
      if (sortValue === 'price-desc') filtered.sort((a, b) => b.price - a.price);
      if (sortValue === 'title-asc') filtered.sort((a, b) => a.title.localeCompare(b.title));
      if (sortValue === 'title-desc') filtered.sort((a, b) => b.title.localeCompare(a.title));

      displayProducts(filtered);
    }

    categorySelect.addEventListener('change', filterAndSortProducts);
    searchInput.addEventListener('input', filterAndSortProducts); // Optional extra 1
    sortSelect.addEventListener('change', filterAndSortProducts); // Optional extra 3

    fetchProducts();
  </script>
</body>
</html>